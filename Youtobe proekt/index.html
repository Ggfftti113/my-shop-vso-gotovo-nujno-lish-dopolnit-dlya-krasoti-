<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Shop</title>

  <link rel="stylesheet" href="./style.css">
  <link rel="stylesheet" href="components/Header/Header.css">
  <link rel="stylesheet" href="components/Products/Products.css">
  <link rel="stylesheet" href="components/Shopping/Shopping.css">
  <link rel="stylesheet" href="components/Favorites/Favorites.css">
  <link rel="stylesheet" href="components/Profile/Profile.css">
  <link rel="stylesheet" href="components/Footer/Footer.css">
</head>
<body>

  <div id="header"></div>
  <div id="spa-view"></div>
  <div id="footer"></div>

  <!-- constants & utils -->
  <script src="constants/catalog.js"></script>
<script src="constants/root.js"></script>
<script src="utils/localStorageUtil.js"></script>

  <!-- components -->
  <script src="components/Header/Header.js"></script>
<script src="components/Products/Products.js"></script>
<script src="components/Shopping/Shopping.js"></script>
<script src="components/Favorites/Favorites.js"></script>
<script src="components/Profile/Profile.js"></script>
<script src="components/Footer/Footer.js"></script>

  <!-- SPA navigation -->
  <script>
    const pages = {
      home: `
<section class="hero">
  <h1 class="hero-title">–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä –¥–ª—è –∫–∞–∂–¥–æ–≥–æ.</h1>
  <p class="hero-subtitle">–õ—É—á—à–∏–µ —Ç–æ–≤–∞—Ä—ã, —Ç–æ—á–Ω—ã–π –¥–∏–∑–∞–π–Ω, –∫–æ–º—Ñ–æ—Ä—Ç–Ω–∞—è –ø–æ–∫—É–ø–∫–∞.</p>
  <button class="hero-btn" onclick="renderPage('catalog')">–ù–∞—á–∞—Ç—å –ø–æ–∫—É–ø–∫–∏</button>
</section>

<section class="popular-section">
  <h2 class="section-title">–ü–æ–ø—É–ª—è—Ä–Ω–æ–µ</h2>
  <div id="home-popular"></div>
</section>

<section class="advantages">
  <div class="adv-item">
    <h3>üöÄ –ë—ã—Å—Ç—Ä–æ</h3>
    <p>–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏ —É–¥–æ–±–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è.</p>
  </div>
  <div class="adv-item">
    <h3>üéß –ü–æ–¥–¥–µ—Ä–∂–∫–∞</h3>
    <p>–í—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤—ã –ø–æ–º–æ—á—å –∏ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã.</p>
  </div>
  <div class="adv-item">
    <h3>‚ú® –ö–∞—á–µ—Å—Ç–≤–æ</h3>
    <p>–¢–æ–ª—å–∫–æ –ª—É—á—à–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã.</p>
  </div>
</section>
`,

      catalog: `<div id="products-root"></div>`,
      favorites: `<div id="favorites-root"></div>`,
      profile: `<div id="profile-root"></div>`,
      cart: `<div id="shopping-root"></div>`
    };

    function renderPage(page){
      const container = document.getElementById('spa-view');
      container.className = 'page-enter';
      setTimeout(() => {
        container.innerHTML = pages[page] || pages.home;

        // after HTML inserted, call component renders
        if(page === 'catalog') productsPage.render();
        if(page === 'cart') shoppingPage.render();
        if(page === 'favorites') favoritesPage.render();
        if(page === 'profile') profilePage.render();
        if (page === "home") renderHomePopular();


        headerPage.render(); // refresh header (counter etc)
        container.className = 'page-enter-active';
      }, 80);
    }

    // start: show catalog by default
    renderPage('catalog');

    // –†–µ–Ω–¥–µ—Ä –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
function renderHomePopular() {
  let container = document.getElementById("home-popular");
  if (!container) return;

  let html = "";

  CATALOG.slice(0, 4).forEach(item => {
    html += `
      <div class="home-product">
        <img src="${item.img}" class="home-product-img">
        <p class="home-product-name">${item.name}</p>
        <span class="home-product-price">${item.price.toLocaleString()} so'm</span>
      </div>
    `;
  });

  container.innerHTML = html;
}

  </script>

<script src="utils/theme.js"></script>

</body>
</html>
